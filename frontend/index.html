<script>
    // FIX: Set API to an empty string ("") to use the current domain.
    // This connects to the service hosting this HTML page:
    // https://e-commerce-frontend-production-f9c0.up.railway.app/api/products
    const API = ""; 

    async function loadProducts(){
      const res = await fetch(`${API}/api/products`);
      
      if (!res.ok) {
          // If this still fails, your frontend server.js file is not handling the route.
          console.error(`Fetch failed with status: ${res.status}. Check your 'frontend/server.js' route definitions.`);
          throw new Error(`HTTP error: ${res.status}`); 
      }

      const products = await res.json();
      console.log(products);
      // TODO: render products into the page
    }
    
    // Call the function and catch errors gracefully
    loadProducts().catch(e => console.error("Could not load products:", e));
</script>
